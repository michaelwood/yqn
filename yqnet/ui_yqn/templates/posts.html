{% extends 'posts_base.html' %}

{% block posts_content %}
{% load static %}
{% load vue_widget %}

<div class="my-3 p-3 bg-white rounded shadow-sm">
    <div class="clearfix border-bottom border-gray pb-1 mb-0  ">
      <div class="float-right">

        {% if user.is_authenticated %}

        <button title="Add Post" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#add-object-modal-Posts">
            <i class="fas fa-plus-circle"></i>
             Post
        </button>

        <button title="Add Feed" class="btn btn-secondary btn-sm" data-toggle="modal" data-target="#add-object-modal-XMLFeeds">
            <i class="fas fa-plus-circle"></i>
             Feed
        </button>

        {% else %}
        <a href="{% url "login" %}?next={% url "posts" %}?action=do_post" class="btn btn-primary btn-sm">
            <i class="fas fa-plus-circle"></i>
             Post
        </a>
        <a href="{% url "login" %}?next={% url "posts" %}?action=do_post" class="btn btn-secondary btn-sm">
            <i class="fas fa-plus-circle"></i>
             Feed
        </a>

        {% endif %}

      </div>

      <h6 class="float-left">Posts</h6>
      <a href="#" tabindex=0 class="small float-left ml-2" data-trigger="focus" data-placement="left" data-content="These are posts aggregated from around the web and from
          the YQN community. The views expressed in these posts are their own
          authors and
          not of YQN" data-toggle="popover" data-container="body">
          <i class="far fa-question-circle"></i>
      </a>
    </div>

    <div id="posts-app" v-cloak>
      <posts limit="20"></posts>
    </div>

</div>

{% vue_widget "posts.html" %}


{% if user.is_authenticated %}
<div id="add-object-modal-app" v-cloak>
  <add-object-modal start-model="Posts"  title="Add a Post" success="Your post was added thanks for your contribution"></add-object-modal>
  <add-object-modal start-model="XMLFeeds" title="Add a Blog, Podcast or News Feed" success="Your feed was successfully submitted. Posts will appear the next time it syncs (approx once an hour)"></add-object-modal>
</div>

{% vue_widget "add-object-modal.html" %}
{% endif %}

  <div id="contact-app">
      <contact></contact>
  </div>
  {% vue_widget "contact.html" %}


{% endblock %}
